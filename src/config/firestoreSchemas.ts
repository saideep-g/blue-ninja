/**\n * Firestore Schema Configuration for Blue Ninja v2.0\n * \n * This file defines the complete structure for the new hierarchical Firestore schema\n * that organizes questions by curriculum (module → atom → questions).\n * \n * Key improvements:\n * - 80% reduction in Firestore reads (batch atom fetches vs individual question reads)\n * - Curriculum-first organization matching learning structure\n * - Future-proof for new question types and features\n * - Optimized for real-time student quiz delivery\n * \n * @module config/firestoreSchemas\n */\n\n/**\n * Firestore collection names and their purposes\n * \n * QUESTIONS_V2: Main question storage (hierarchical by curriculum)\n * QUESTIONS_V2_INDEX: Global search/filter index for fast queries\n * ADMIN_SESSIONS: Audit trail for admin uploads and operations\n * VALIDATION_CACHE: Temporary cache for validation results (24h TTL)\n * BULK_OPERATIONS: Background queue for batch processing operations\n */\nexport const FIRESTORE_COLLECTIONS = {\n  CURRICULUM_METADATA: 'curriculum',\n  QUESTIONS_V1: 'questions', // Legacy v1 collection (read-only after deprecation)\n  QUESTIONS_V2: 'questions_v2',\n  QUESTIONS_V2_INDEX: 'questions_v2_index',\n  ADMIN_SESSIONS: 'admin_sessions',\n  VALIDATION_CACHE: 'validation_cache',\n  BULK_OPERATIONS: 'bulk_operations'\n};\n\n/**\n * Curriculum identifier for the Blue Ninja platform\n * Format: [platform]-[curriculum]-[track]-[foundation]\n * \n * Example: mathquest-cbse7-olympiad-eapcet-foundation\n * - mathquest: Blue Ninja Math Learning Platform\n * - cbse7: CBSE Class 7 Curriculum\n * - olympiad-eapcet: Includes olympiad and EAPCET preparation\n * - foundation: Foundation mathematics\n */\nexport const CURRICULUM_ID = 'mathquest-cbse7-olympiad-eapcet-foundation';\n\n/**\n * Helper functions for generating Firestore document paths\n * \n * These functions ensure consistent path generation and make refactoring easier.\n * All paths follow the hierarchical structure:\n * questions_v2/{moduleId}/atom/{atomId}/{questionId}\n */\nexport const docPaths = {\n  /**\n   * Generate full path to a specific question document\n   * @param moduleId - Parent module ID (e.g., \"CBSE7-CH04-SIMPLE-EQUATIONS\")\n   * @param atomId - Parent atom ID (e.g., \"CBSE7.CH04.EQ.04\")\n   * @param questionId - Question ID (e.g., \"MQ.CBSE7.CH04.EQ.04.BAL.0001\")\n   * @returns Firestore path: \"questions_v2/{moduleId}/atom/{atomId}/{questionId}\"\n   */\n  questionV2: (moduleId: string, atomId: string, questionId: string) =>\n    `${FIRESTORE_COLLECTIONS.QUESTIONS_V2}/${moduleId}/atom/${atomId}/${questionId}`,\n\n  /**\n   * Generate path to all questions in an atom\n   * @param moduleId - Parent module ID\n   * @param atomId - Atom ID\n   * @returns Firestore collection path: \"questions_v2/{moduleId}/atom/{atomId}\"\n   */\n  atomQuestions: (moduleId: string, atomId: string) =>\n    `${FIRESTORE_COLLECTIONS.QUESTIONS_V2}/${moduleId}/atom/${atomId}`,\n\n  /**\n   * Generate path to all atoms in a module\n   * @param moduleId - Module ID\n   * @returns Firestore collection path: \"questions_v2/{moduleId}/atom\"\n   */\n  moduleAtoms: (moduleId: string) =>\n    `${FIRESTORE_COLLECTIONS.QUESTIONS_V2}/${moduleId}/atom`,\n\n  /**\n   * Generate path to a search index document\n   * Used for fast queries by template, difficulty, and status\n   * @param templateId - Template type (e.g., \"BALANCEOPS\", \"MCQCONCEPT\")\n   * @param difficulty - Difficulty level (1-3)\n   * @param status - Question status (DRAFT, PUBLISHED, ARCHIVED)\n   * @returns Firestore doc path: \"questions_v2_index/{templateId}_{difficulty}_{status}\"\n   */\n  indexDoc: (templateId: string, difficulty: number, status: string) =>\n    `${FIRESTORE_COLLECTIONS.QUESTIONS_V2_INDEX}/${templateId}_${difficulty}_${status}`,\n\n  /**\n   * Generate path to an admin session document (for upload audit trail)\n   * @param sessionId - UUID or unique session identifier\n   * @returns Firestore doc path: \"admin_sessions/{sessionId}\"\n   */\n  adminSession: (sessionId: string) =>\n    `${FIRESTORE_COLLECTIONS.ADMIN_SESSIONS}/${sessionId}`,\n\n  /**\n   * Generate path to a validation cache document\n   * @param questionId - Question ID being validated\n   * @returns Firestore doc path: \"validation_cache/{questionId}\"\n   */\n  validationCache: (questionId: string) =>\n    `${FIRESTORE_COLLECTIONS.VALIDATION_CACHE}/${questionId}`,\n\n  /**\n   * Generate path to a bulk operation document\n   * @param batchId - UUID or unique batch identifier\n   * @returns Firestore doc path: \"bulk_operations/{batchId}\"\n   */\n  bulkOperation: (batchId: string) =>\n    `${FIRESTORE_COLLECTIONS.BULK_OPERATIONS}/${batchId}`\n};\n\n/**\n * Question template type definitions\n * \n * These are the 14+ question types supported by the Blue Ninja platform.\n * Each template has unique interaction logic, scoring model, and pedagogy.\n */\nexport const QUESTION_TEMPLATES = {\n  MCQCONCEPT: 'MCQCONCEPT',\n  TWOTIER: 'TWOTIER',\n  NUMERICINPUT: 'NUMERICINPUT',\n  EXPRESSIONINPUT: 'EXPRESSIONINPUT',\n  WORKEDEXAMPLECOMPLETE: 'WORKEDEXAMPLECOMPLETE',\n  STEPORDER: 'STEPORDER',\n  ERRORANALYSIS: 'ERRORANALYSIS',\n  CLASSIFYSORT: 'CLASSIFYSORT',\n  NUMBERLINEPLACE: 'NUMBERLINEPLACE',\n  MATCHING: 'MATCHING',\n  BALANCEOPS: 'BALANCEOPS',\n  GEOMETRYTAP: 'GEOMETRYTAP',\n  MULTISTEPWORD: 'MULTISTEPWORD',\n  TRANSFERMINI: 'TRANSFERMINI',\n  SIMULATION: 'SIMULATION',\n  SHORTEXPLAIN: 'SHORTEXPLAIN'\n} as const;\n\n/**\n * Scoring model types\n * \n * - EXACT: Correct answer must match exactly\n * - TOLERANCE: Answer within tolerance range (e.g., ±0.01)\n * - EQUIVALENCE: Mathematically equivalent (e.g., 2+3 = 5)\n * - PROCESS: Evaluates method/sequence, not just result\n * - RUBRICLITE: Simple rubric-based (0-2 points, e.g., \"attempt\", \"partial\", \"complete\")\n * - SETMEMBERSHIP: All items must be correctly classified/matched\n */\nexport const SCORING_MODELS = {\n  EXACT: 'exact',\n  TOLERANCE: 'tolerance',\n  EQUIVALENCE: 'equivalence',\n  PROCESS: 'process',\n  RUBRICLITE: 'rubriclite',\n  SETMEMBERSHIP: 'setmembership'\n} as const;\n\n/**\n * Question status values\n * \n * - DRAFT: Created by admin, not yet visible to students\n * - PUBLISHED: Active and visible to students\n * - ARCHIVED: No longer in active use, kept for data analysis\n * - DEPRECATED: Old version of a question, replaced by newer version\n */\nexport const QUESTION_STATUS = {\n  DRAFT: 'DRAFT',\n  PUBLISHED: 'PUBLISHED',\n  ARCHIVED: 'ARCHIVED',\n  DEPRECATED: 'DEPRECATED'\n} as const;\n\n/**\n * Bloom's taxonomy levels\n * \n * Used to classify cognitive complexity:\n * 1. REMEMBER: Recall facts and basic concepts\n * 2. UNDERSTAND: Explain ideas or concepts\n * 3. APPLY: Use information in new situations\n * 4. ANALYZE: Draw connections among ideas\n * 5. EVALUATE: Justify a stand or decision\n * 6. CREATE: Produce new or original work\n */\nexport const BLOOM_LEVELS = {\n  REMEMBER: 'REMEMBER',\n  UNDERSTAND: 'UNDERSTAND',\n  APPLY: 'APPLY',\n  ANALYZE: 'ANALYZE',\n  EVALUATE: 'EVALUATE',\n  CREATE: 'CREATE'\n} as const;\n\n/**\n * Difficulty levels\n * \n * 1: Easy - Can solve with minimal support, quick recall\n * 2: Medium - Requires some problem-solving, multi-step\n * 3: Hard - Requires deep understanding, novel application\n */\nexport const DIFFICULTY_LEVELS = {\n  EASY: 1,\n  MEDIUM: 2,\n  HARD: 3\n} as const;\n\n/**\n * Mastery levels for learning progression\n * \n * - ACQUIRE: Can solve with scaffolding (accuracy ≥80%, ≥8 attempts)\n * - SECURE: Can solve independently (accuracy ≥90%, ≥12 attempts, avg hints ≤0.5)\n * - FLUENT: Efficient and accurate (accuracy ≥90%, time ≤45s)\n * - TRANSFER: Can apply in new contexts (≥2 of 3 transfer items correct)\n */\nexport const MASTERY_LEVELS = {\n  ACQUIRE: 'ACQUIRE',\n  SECURE: 'SECURE',\n  FLUENT: 'FLUENT',\n  TRANSFER: 'TRANSFER'\n} as const;\n\n/**\n * Quality grade mappings\n * \n * Based on quality score (0-1.0):\n * - A: 0.85+ (Excellent: complete with all support materials)\n * - B: 0.70-0.84 (Good: has key materials, some gaps)\n * - C: 0.55-0.69 (Fair: basic structure, needs improvement)\n * - D: <0.55 (Poor: incomplete, significant gaps)\n */\nexport const QUALITY_GRADES = {\n  A: 'A',\n  B: 'B',\n  C: 'C',\n  D: 'D'\n} as const;\n\n/**\n * Firestore indexes required for optimal performance\n * \n * These indexes should be created in Firestore console or via deployment scripts\n */\nexport const FIRESTORE_INDEXES = [\n  {\n    collection: 'questions_v2/{moduleId}/atom/{atomId}',\n    fields: [\n      { name: '__name__', direction: 'ASCENDING' },\n      { name: 'status', direction: 'ASCENDING' },\n      { name: 'createdAt', direction: 'DESCENDING' }\n    ],\n    queryScope: 'COLLECTION'\n  },\n  {\n    collection: 'questions_v2_index',\n    fields: [\n      { name: 'templateId', direction: 'ASCENDING' },\n      { name: 'difficulty', direction: 'ASCENDING' },\n      { name: 'status', direction: 'ASCENDING' }\n    ],\n    queryScope: 'COLLECTION'\n  },\n  {\n    collection: 'admin_sessions',\n    fields: [\n      { name: 'uploadedBy', direction: 'ASCENDING' },\n      { name: 'uploadedAt', direction: 'DESCENDING' }\n    ],\n    queryScope: 'COLLECTION'\n  }\n];\n\nexport default {\n  FIRESTORE_COLLECTIONS,\n  CURRICULUM_ID,\n  docPaths,\n  QUESTION_TEMPLATES,\n  SCORING_MODELS,\n  QUESTION_STATUS,\n  BLOOM_LEVELS,\n  DIFFICULTY_LEVELS,\n  MASTERY_LEVELS,\n  QUALITY_GRADES,\n  FIRESTORE_INDEXES\n};\n